let accountID, disableModal = $("#disable-modal"), activeModal = $("#active-modal"); $(".dimis-modal").click(function () { disableModal.modal("hide"), activeModal.modal("hide") }); var changerole = function (e) { let t = $("#role-id-" + e).val(), i = e; $.ajax({ type: "POST", url: "/Auth/ChangeRoles", contentType: "application/json; charset=utf-8", data: JSON.stringify({ accountID: i, roleID: t }), dataType: "json", success: function (e) { if (0 == e) { return Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1e3, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Quản trị viên mới có quyền chỉnh sửa" }), !1 } return void Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1e3, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "success", title: "Chuyển quyền thành công" }) }, error: function () { Swal.mixin({ toast: !0, position: "top", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Lỗi" }) } }) }, disableOpen = function (e, t) { disableModal.find("#disable__name").text(t), disableModal.modal("show"), accountID = e }; $("#disable__submit").click(function () { $.ajax({ type: "POST", url: "/Auth/Disable", contentType: "application/json; charset=utf-8", data: JSON.stringify({ id: accountID }), dataType: "json", success: function (e) { if ("success" == e) { disableModal.modal("hide"), Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "success", title: "Vô hiệu hóa tài khoản thành công" }); let e = $("#count-trash").text(), t = Number(e) + 1; return $("#count-trash").text(t), void $("#item_" + accountID).remove() } }, error: function () { Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Lỗi" }) } }) }); var isActiveOpen = function (e, t) { activeModal.find("#active__name").text(t), activeModal.modal("show"), accountID = e }; $("#active__submit").click(function () { $.ajax({ type: "POST", url: "/Auth/IsActive", contentType: "application/json; charset=utf-8", data: JSON.stringify({ id: accountID }), dataType: "json", success: function (e) { if ("success" == e) { return disableModal.modal("hide"), Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "success", title: "Khôi phục tài khoản thành công" }), $("#item_" + accountID).remove(), void activeModal.modal("hide") } }, error: function () { Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Lỗi" }) } }) });