const deleteOrDisablemodal = $("#delete-disable"), activateModal = $("#activate"); let id; var deleteOrDisableConfirm = function (e, t, i, n, o) { deleteOrDisablemodal.find("#product__id").text(t), deleteOrDisablemodal.find("#product__old-price").text(n), deleteOrDisablemodal.find("#product__price").text(i), deleteOrDisablemodal.find("#product__img").attr("src", o), deleteOrDisablemodal.modal("show"), id = e }; $(".dimis-modal").click(function () { deleteOrDisablemodal.modal("hide"), activateModal.modal("hide") }), $("#disable-product").click(function () { deleteOrDisablemodal.modal("hide"), $.ajax({ type: "POST", url: "/ProductsAdmin/Disable", contentType: "application/json; charset=utf-8", data: JSON.stringify({ id: id }), dataType: "json", success: function (e) { if ("disabled" == e) { Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "success", title: "Vô hiệu hóa thành công" }); let e = $("#count-trash").text(), t = Number(e) + 1; return $("#count-trash").text(t), void $("#item_" + id).remove() } }, error: function () { Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Vô hiệu hóa không thành công" }) } }) }); var activateProduct = function (e, t, i, n, o) { activateModal.find("#product__id").text(t), activateModal.find("#product__old-price-trash").text(n), activateModal.find("#product__price-trash").text(i), $("#product__img").attr("src", o), activateModal.modal("show"), id = e }; $("#avtivate__product-submit").click(function () { $.ajax({ type: "POST", url: "/ProductsAdmin/Undo", contentType: "application/json; charset=utf-8", data: JSON.stringify({ id: id }), dataType: "json", success: function (e) { if ("activate" == e) { activateModal.modal("hide"), Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "success", title: "Khôi phục thành công" }); let e = $("#count-trash").text(), t = Number(e) - 1; return $("#count-trash").text(t), void $("#item_" + id).remove() } }, error: function () { Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Khôi phục không thành công" }) } }) }), $("#delete-product").click(function (e) { deleteOrDisablemodal.modal("hide"), $.ajax({ type: "POST", url: "/ProductsAdmin/Delete", contentType: "application/json; charset=utf-8", data: JSON.stringify({ id: id }), dataType: "json", success: function (e) { if ("delete" == e) { return Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "success", title: "Xóa thành công" }), void $("#item_" + id).remove() } }, error: function () { Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Xóa không thành công" }) } }) }); var counter = 1; function showPreview(e) { var t = e.previousElementSibling, i = e.files[0], n = new FileReader; n.onloadend = function () { t.src = n.result, t.style.display = "block" }, i ? n.readAsDataURL(i) : t.src = "" } $("#btn2").click(function () { if (++counter < 10 && $(".append-image").append("<div class='form-input col-lg-4'><label for='file-ip-" + counter + "'>Chọn ảnh</label><img height='100px' /><input type='file' id='file-ip-" + counter + "' name='ImageUploadMulti' accept='.png,.jpg,jpeg' onchange='showPreview(this)'></div>"), counter >= 11) { Swal.mixin({ toast: !0, position: "top", showConfirmButton: !1, timer: 1500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Số ảnh được thêm tối đa 9 ảnh" }) } });